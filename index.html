<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unveiling Shanghai</title>
    <meta name="description" content="Pudong Unveiled: A Juxtaposed Map of Memory">
    
    <!-- 1. JuxtaposeJS CSS -->
    <link rel="stylesheet" href="https://cdn.knightlab.com/libs/juxtapose/latest/css/juxtapose.css">
    
    <!-- React & ReactDOM for Falling Text -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Matter.js (Physics Engine) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    
    <!-- 2. Google Fonts (备用网络字体) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- 3. 自定义样式 -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 背景纹理 -->
    <div class="background-texture"></div>
    
    <!-- 自定义光标 -->
    <div class="custom-cursor" id="custom-cursor"></div>
    <div class="custom-cursor-ring" id="custom-cursor-ring"></div>

    <!-- Navigation Modal -->
    <div class="navigation-modal" id="navigation-modal">
        <div class="navigation-modal-content">
            <button class="navigation-modal-close" id="modal-close" aria-label="Close">×</button>
            <h2>How to Navigate</h2>
            <ul class="navigation-modal-instructions">
                <li><strong>Scroll</strong> to navigate through time and explore different sections of the archive.</li>
                <li><strong>Hover</strong> over images for historical details and visual transformations.</li>
                <li><strong>Click</strong> on highlighted terms and region tabs to read residents' stories and learn about the resettlement policy's impact.</li>
                <li><strong>Drag</strong> the slider on the map comparison to see Shanghai's transformation from 1980s to present.</li>
            </ul>
            <div class="navigation-modal-checkbox-wrapper">
                <input type="checkbox" id="dont-show-again">
                <label for="dont-show-again">Don't show this again</label>
            </div>
        </div>
    </div>

    <div class="main-wrapper">
        <!-- 顶部标题区 -->
        <header class="archive-header">
            <div class="title-wrapper">
                <div class="title-vertical-line"></div>
                <div class="title-content">
                    <h1 class="title" data-text="Unveiling Shanghai">Unveiling Shanghai</h1>
                    <div class="subtitle-group">
                        <p class="subtitle-en">A Juxtaposed Archive of Memory</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- 地图展示区 -->
        <div class="exhibit-container">
            <!-- 
               注意：这里添加了 style="min-height..." 作为防塌陷保护 
               Juxtapose 会自动替换这个 div 内部的内容
            -->
            <div id="juxtapose-wrapper" class="juxtapose-frame">
                <div class="juxtapose" data-startingposition="50" data-showlabels="true" data-showcredits="false" data-animate="true">
                    <!-- 
                        请确保 images 文件夹内有这两个文件，且文件名完全一致（包括大小写）
                    -->
                    <img src="images/shanghainew.png" data-label="2024 Modern Shanghai" alt="New Shanghai Map" />
                    <img src="images/shanghaiold.png" data-label="1980s Old Shanghai" alt="Old Shanghai Map" />
        </div>
            </div>
            <p class="exhibit-caption">Figure 1. The transformation of urban fabric (1980s - Present)</p>
        </div>

        <!-- 地标对比区域 -->
        <section class="landmarks-section">
            <div class="landmarks-header">
                <div class="landmarks-title-line"></div>
                <div class="landmarks-title-content">
                    <h2 class="landmarks-title">Landmarks Through Time</h2>
                    <p class="landmarks-subtitle">Three iconic locations, two eras, one transformation</p>
                    <p class="landmarks-context-note">Why 1940? This year represents the peak of the Longtang era. Built largely between the 1870s and 1930s, these lane houses defined Shanghai's landscape and social culture before the massive waves of modern urbanization and skyscraper construction began.</p>
                </div>
            </div>

            <!-- 外滩 THE BUND -->
            <div class="landmark-card" data-landmark="bund">
                <div class="landmark-number">01</div>
                <div class="landmark-content">
                    <div class="landmark-image-container">
                        <div class="landmark-image modern" style="background-image: url('shanghaiphoto/thebundnew.jpg'); background-size: 120%;"></div>
                        <div class="landmark-image old" style="background-image: url('shanghaiphoto/thebundold.webp'); background-size: 120%;"></div>
                        <div class="landmark-overlay">
                            <div class="landmark-status">
                                <span class="status-text">TARGET_LOCKED</span>
                            </div>
                        </div>
                        <div class="landmark-progress"></div>
                    </div>
                    <div class="landmark-text">
                        <div class="landmark-year">
                            <span class="year-old" data-tooltip="Why 1940? This year represents the peak of the Longtang era. Built largely between the 1870s and 1930s, these lane houses defined Shanghai's landscape and social culture before the massive waves of modern urbanization and skyscraper construction began.">1940</span>
                            <span class="year-separator">→</span>
                            <span class="year-new">2024</span>
                        </div>
                        <h3 class="landmark-name">THE BUND</h3>
                        <p class="landmark-desc">Colonial grandeur meets neon dreams.</p>
                    </div>
                </div>
            </div>

            <!-- 陆家嘴 LUJIAZUI -->
            <div class="landmark-card" data-landmark="lujiazui">
                <div class="landmark-number">02</div>
                <div class="landmark-content">
                    <div class="landmark-image-container">
                        <div class="landmark-image modern" style="background-image: url('shanghaiphoto/lujiazuinew.jpg')"></div>
                        <div class="landmark-image old" style="background-image: url('shanghaiphoto/lujiazuiold.jpg')"></div>
                        <div class="landmark-overlay">
                            <div class="landmark-status">
                                <span class="status-text">TARGET_LOCKED</span>
                            </div>
                        </div>
                        <div class="landmark-progress"></div>
                    </div>
                    <div class="landmark-text">
                        <div class="landmark-year">
                            <span class="year-old" data-tooltip="Why 1940? This year represents the peak of the Longtang era. Built largely between the 1870s and 1930s, these lane houses defined Shanghai's landscape and social culture before the massive waves of modern urbanization and skyscraper construction began.">1940</span>
                            <span class="year-separator">→</span>
                            <span class="year-new">2024</span>
                        </div>
                        <h3 class="landmark-name">LUJIAZUI</h3>
                        <p class="landmark-desc">From mudflats to vertical velocity.</p>
                    </div>
                </div>
            </div>

            <!-- 人民广场 PEOPLE SQUARE -->
            <div class="landmark-card" data-landmark="peoplesquare">
                <div class="landmark-number">03</div>
                <div class="landmark-content">
                    <div class="landmark-image-container">
                        <div class="landmark-image modern" style="background-image: url('shanghaiphoto/peoplesquarenew.jpg')"></div>
                        <div class="landmark-image old" style="background-image: url('shanghaiphoto/peoplesquareold.jpg')"></div>
                        <div class="landmark-overlay">
                            <div class="landmark-status">
                                <span class="status-text">TARGET_LOCKED</span>
                            </div>
                        </div>
                        <div class="landmark-progress"></div>
                    </div>
                    <div class="landmark-text">
                        <div class="landmark-year">
                            <span class="year-old" data-tooltip="Why 1940? This year represents the peak of the Longtang era. Built largely between the 1870s and 1930s, these lane houses defined Shanghai's landscape and social culture before the massive waves of modern urbanization and skyscraper construction began.">1940</span>
                            <span class="year-separator">→</span>
                            <span class="year-new">2024</span>
                        </div>
                        <h3 class="landmark-name">PEOPLE SQUARE</h3>
                        <p class="landmark-desc">Consumerism across the century.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 控制面板与叙事卡片 -->
        <div class="control-panel">
            <!-- 左侧：区域选择栏 -->
            <div class="regions-container">
                <div class="regions-title-wrapper">
                    <div class="regions-title-line"></div>
                    <h3 class="regions-title">Explore</h3>
                </div>
                <div class="region-bar" data-region="facade">
                    <span class="region-name">The Facade</span>
                </div>
                <div class="region-bar" data-region="lost-identities">
                    <span class="region-name">Lost Identities</span>
                </div>
                <div class="region-bar" data-region="nice-apartment-trap">
                    <span class="region-name">Nice Apartments, No Jobs</span>
                </div>
                <div class="region-bar" data-region="concrete-vs-community">
                    <span class="region-name">Concrete vs. Community</span>
                </div>
            </div>

            <!-- 右侧：叙事档案卡 -->
            <div class="narrative-card">
                <div class="card-stamp">ARCHIVE</div>
            <div id="narrative-content" class="narrative-content">
                <div class="narrative-default">
                        <h2>Trace the Shifts</h2>
                        <p class="narrative-text">Glide across the map to peel back the concrete skyline.</p>
                        <p class="narrative-text">Beneath the steel and concrete, discover the hidden memories of the city.</p>
                        <p style="margin-top: 20px; font-size: 0.9em; color: #888;">(Click on a region below to explore)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 新的黑色页面区域 -->
    <div class="black-section">
        <div class="black-section-content">
            <div id="falling-text-root"></div>
        </div>
        <!-- 个人信息和参考文献区域 -->
        <div class="footer-info">
            <div class="author-info">
                <p class="author-name">Bowen Xiao</p>
                <p class="author-email">xiaobowenlyf@gmail.com</p>
            </div>
            <div class="references-section">
                <h4 class="references-title">References</h4>
                <ol class="references-list">
                    <li>Choi, H. S. (Sunny). (2016). How are public spaces sustaining cultural identities in the context of china's increasingly globally focused urban developments: using a case study of putuo in shanghai. <em>Journal of Architecture and Urbanism</em>, <em>40</em>(3), 198–205. <a href="https://doi.org/10.3846/20297955.2016.1210045" target="_blank">https://doi.org/10.3846/20297955.2016.1210045</a></li>
                    <li>Huang, T. M. (2006). The cosmopolitan imaginary and flexible identities of global city‐regions: Articulating new cultural identities in Taipei and Shanghai. <em>Inter-Asia Cultural Studies</em>, <em>7</em>(3), 472–491. <a href="https://doi.org/10.1080/14649370600849330" target="_blank">https://doi.org/10.1080/14649370600849330</a></li>
                    <li>Jiang, Y., Waley, P., & Gonzalez, S. (2018). "Nice apartments, no jobs": How former villagers experienced displacement and resettlement in the western suburbs of Shanghai. <em>Urban Studies</em>, <em>55</em>(14), 3202–3217. <a href="https://doi.org/10.1177/0042098017740246" target="_blank">https://doi.org/10.1177/0042098017740246</a></li>
                    <li>Song, Y.-L., Chiang, N. L.-H., & Li, S. M. (2012). The Place Attachment of Residents Displaced by Urban Redevelopment Projects in Shanghai. <em>Issues & Studies</em>, <em>48</em>(3), 43–73.</li>
                    <li>Xu, F. (2020). "Pudong Is Not My Shanghai": Displacement, Place‐Identity, and Right to the "City" in Urban China. <em>City & Community</em>, <em>19</em>(2), 330–351. <a href="https://doi.org/10.1111/cico.12491" target="_blank">https://doi.org/10.1111/cico.12491</a></li>
                </ol>
            </div>
        </div>
    </div>

    <!-- 脚本 -->
    <script src="https://cdn.knightlab.com/libs/juxtapose/latest/js/juxtapose.min.js"></script>
    <script src="script.js"></script>
    <script src="landmark-reveal.js"></script>
</body>
</html>