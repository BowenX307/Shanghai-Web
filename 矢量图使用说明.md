# 矢量图导入和使用说明

## 已完成的功能

✅ 矢量图容器结构
✅ 可点击区域系统
✅ 对齐功能框架
✅ 点击事件连接到narrative系统

## 使用步骤

### 1. 导入矢量图

将你的矢量图文件放到 `images/` 目录，然后修改 `index.html` 第42行：

```html
<img id="vector-map-img" src="images/你的矢量图文件名.svg" alt="Shanghai Vector Map" />
```

**支持的格式：**
- SVG（推荐，矢量格式）
- PNG/JPG（如果矢量图已导出为图片）

### 2. 对齐矢量图

系统会自动检测矢量图的尺寸并设置SVG viewBox。如果需要对齐，可以：

**方法1：调整 viewBox（在 `script.js` 的 `alignVectorMap` 函数中）**

如果矢量图尺寸是 1200x800，修改：
```javascript
svg.setAttribute('viewBox', `0 0 1200 800`);
```

**方法2：如果矢量图和老地图尺寸不同，需要手动调整坐标**

### 3. 添加可点击区域

在 `script.js` 的 `clickableRegions` 数组中添加区域：

```javascript
const clickableRegions = [
    {
        id: 'pudong',
        type: 'circle',  // 或 'path', 'rect'
        cx: 500,         // 圆心x坐标（根据实际地图调整）
        cy: 400,         // 圆心y坐标
        r: 50,           // 半径
        region: 'pudong'  // 对应narrativeData中的区域
    },
    // 添加更多区域...
    {
        id: 'old-city',
        type: 'circle',
        cx: 300,
        cy: 500,
        r: 40,
        region: 'old-city'
    }
];
```

### 4. 确定坐标的方法

**方法1：使用浏览器开发者工具**
1. 打开网页，右键点击矢量图
2. 选择"检查元素"
3. 在控制台运行：
```javascript
document.getElementById('vector-map-img').addEventListener('click', (e) => {
    const rect = e.target.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    console.log('点击坐标:', x, y);
    // 需要转换为SVG坐标系统
});
```

**方法2：使用图片编辑软件**
- 在 Photoshop/Figma 中打开矢量图
- 查看关键区域的像素坐标
- 转换为SVG坐标

### 5. 区域类型说明

**Circle（圆形）：**
```javascript
{
    type: 'circle',
    cx: 500,  // 圆心x
    cy: 400,  // 圆心y
    r: 50     // 半径
}
```

**Path（路径，适合不规则区域）：**
```javascript
{
    type: 'path',
    d: 'M 100,100 L 200,100 L 200,200 Z'  // SVG路径数据
}
```

**Rect（矩形）：**
```javascript
{
    type: 'rect',
    x: 100,      // 左上角x
    y: 100,      // 左上角y
    width: 200,  // 宽度
    height: 150 // 高度
}
```

## 当前状态

- ✅ 框架已搭建完成
- ⏳ 等待矢量图文件
- ⏳ 需要调整坐标对齐
- ⏳ 需要添加至少一个可点击点

## 注意事项

1. **JuxtaposeJS兼容性**：如果JuxtaposeJS不工作，可能需要调整HTML结构
2. **响应式**：SVG会自动缩放，但坐标需要基于原始图片尺寸
3. **坐标系统**：SVG坐标从左上角(0,0)开始

## 测试

添加可点击区域后：
1. 刷新页面
2. 鼠标悬停在可点击区域上应该看到高亮
3. 点击区域应该显示对应的narrative内容
4. 下方的区域列表项应该同步高亮

