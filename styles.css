/* =========================================
   1. Fonts & Variables
   ========================================= */
   @font-face {
    font-family: 'Broadway';
    /* 注意：如果字体文件不在 fonts 文件夹，
       请改为 src: url('Broadway Regular.ttf') 
    */
    src: url('fonts/Broadway Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

:root {
    /* Palette: 1930s Shanghai Art Deco */
    --bg-paper: #f4f1ea;          /* Aged Paper */
    --ink-black: #2c2c2c;         /* Soft Black */
    --shanghai-red: #8E2020;      /* Deep Burgundy/Lacquer Red */
    --vintage-gold: #C5A059;      /* Muted Gold */
    --frame-border: #d4d0c7;
    
    /* Typography */
    --font-display: 'Broadway', cursive;
    --font-serif-en: 'Playfair Display', serif;
    --font-serif-cn: 'Noto Serif SC', serif;
    --font-sans: 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

/* =========================================
   2. Global Reset & Texture
   ========================================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: var(--bg-paper);
    color: var(--ink-black);
    font-family: var(--font-serif-en);
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    cursor: none; /* 隐藏默认光标，使用自定义光标 */
}

/* Noise Filter via SVG Data URI for Texture */
.background-texture {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
    opacity: 0.08;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}


.main-wrapper {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
    z-index: 1;
}

/* =========================================
   3. Header (The Marquee)
   ========================================= */
.archive-header {
    margin-bottom: 30px;
    padding: 20px 0;
    position: relative;
}

.title-wrapper {
    display: flex;
    align-items: flex-start;
    gap: 20px;
}

.title-vertical-line {
    width: 3px;
    height: 140px;
    background-color: var(--shanghai-red);
    flex-shrink: 0;
    margin-top: 5px;
}

.title-content {
    flex: 1;
}

.title {
    font-family: var(--font-display), serif;
    font-size: 5.5rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin: 0 0 10px 0;
    color: #111;
    text-align: left;
    line-height: 1.1;
    transition: opacity 0.4s ease, transform 0.4s ease;
    opacity: 0;
    transform: translateY(30px);
}

.subtitle-en {
    transition: opacity 0.4s ease, transform 0.4s ease;
    opacity: 0;
    transform: translateY(30px);
}

/* 标题动画类 */
.title.animate-in,
.subtitle-en.animate-in {
    opacity: 1 !important;
    transform: translateY(0) !important;
}

.title.animate-out,
.subtitle-en.animate-out {
    opacity: 0 !important;
    transform: translateY(-30px) !important;
}

.subtitle-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
    align-items: flex-start;
}

.subtitle-en {
    font-family: var(--font-display), serif;
    font-style: normal;
    font-size: 1.2rem;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.subtitle-cn {
    font-family: var(--font-serif-cn);
    font-weight: 300;
    letter-spacing: 4px;
    font-size: 1rem;
    color: var(--shanghai-red);
}

/* Art Deco Decorative Lines */
.header-border-top,
.header-border-bottom {
    height: 3px;
    background-color: #111;
    width: 100px;
    margin: 0 auto;
    position: relative;
}

.header-border-top::before, .header-border-bottom::before {
    content: '';
    position: absolute;
    top: 4px;
    left: -20px;
    width: 140px;
    height: 1px;
    background-color: var(--vintage-gold);
}

/* =========================================
   4. The Exhibit (Map Frame) - FIXES APPLIED
   ========================================= */
.exhibit-container {
    margin-bottom: 30px;
}

.juxtapose-frame {
    /* FIX: 确保容器在图片加载前有高度，防止页面跳动 */
    min-height: 500px; 
    aspect-ratio: 16/9; /* 匹配图片实际比例 3193x1796 */
    width: 100%;
    
    border: 8px solid #fff;
    border-bottom: 8px solid #fff; /* 确保下边框宽度一致 */
    outline: 1px solid var(--frame-border);
    position: relative;
    background: transparent; /* 改为透明，避免灰色背景 */
    overflow: hidden; /* 防止内容溢出边框 */
    padding: 0;
    margin: 0;
}

.exhibit-caption {
    text-align: center;
    font-family: var(--font-sans);
    font-size: 0.8rem;
    color: #888;
    margin-top: 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* JuxtaposeJS Overrides */
.juxtapose-frame .juxtapose {
    width: 100% !important;
    height: 100% !important;
    box-sizing: border-box;
    background: transparent !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* 让 JuxtaposeJS 自己处理图片定位，不要强制覆盖 */
.juxtapose-frame .juxtapose img {
    display: block;
}

/* 确保 JuxtaposeJS 内部容器稳定，但不干扰其内部定位 */
.juxtapose-frame .jx-knightlab {
    width: 100% !important;
    height: 100% !important;
    background: transparent !important;
    margin: 0 !important;
    padding: 0 !important;
    position: relative !important;
    /* 启用硬件加速，提升动画性能 */
    transform: translateZ(0);
    will-change: transform;
}

/* 移除 JuxtaposeJS 默认的灰色背景 */
.juxtapose-frame .jx-knightlab .jx-image {
    background: transparent !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    height: 100% !important;
    /* 优化图片渲染性能 */
    transform: translateZ(0);
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    left: 0;
}

.juxtapose-frame .jx-knightlab .jx-image img {
    opacity: 1 !important;
    visibility: visible !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    display: block !important;
    /* 优化图片动画性能 */
    transform: translateZ(0);
    will-change: transform;
}

/* JuxtaposeJS 标签样式 - 使用更强的选择器确保覆盖 */
.juxtapose-frame .jx-knightlab div.jx-image div.jx-label,
.jx-knightlab div.jx-image div.jx-label,
div.jx-image div.jx-label,
.juxtapose-frame div.jx-label {
    font-family: var(--font-display), 'Broadway', cursive !important;
    background-color: #f4f1ea !important;
    background: #f4f1ea !important;
    color: #000 !important;
    opacity: 1 !important;
    border-radius: 0 !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
}

/* 确保标签内的所有文字都是黑色 */
.juxtapose-frame .jx-knightlab div.jx-image div.jx-label *,
.jx-knightlab div.jx-image div.jx-label *,
div.jx-image div.jx-label *,
.juxtapose-frame div.jx-label * {
    color: #000 !important;
}

.jx-controller {
    background-color: var(--shanghai-red) !important;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease !important;
    box-shadow: 0 2px 8px rgba(142, 32, 32, 0.3) !important;
    cursor: grab !important;
}

.jx-controller:active {
    cursor: grabbing !important;
    box-shadow: 0 4px 12px rgba(142, 32, 32, 0.5) !important;
}

.juxtapose-frame:hover .jx-controller {
    transform: scale(1.1) !important;
    box-shadow: 0 4px 16px rgba(142, 32, 32, 0.4) !important;
}

/* =========================================
   5. Control Panel & Narrative Card
   ========================================= */
.control-panel {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 左侧栏 + 右侧内容 */
    gap: 40px;
    align-items: start;
    margin-top: 5px;
}


/* Regions Container - 长栏样式 */
.regions-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 100%;
}

.regions-title-wrapper {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #ccc;
}

.regions-title-line {
    width: 3px;
    height: 40px;
    background-color: var(--shanghai-red);
    flex-shrink: 0;
}

.regions-title {
    font-family: var(--font-display), 'Broadway', cursive;
    font-size: 2.5rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #111;
    margin: 0;
}

.region-bar {
    width: 100%;
    padding: 25px 30px;
    background: #fff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* 为选中的 tab 添加前面的红线 */
.region-bar.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background-color: var(--shanghai-red);
    z-index: 1;
}

/* 其他 tab 初始状态：隐藏在上方 */
.region-bar:not(:first-child) {
    opacity: 0;
    transform: translateY(-30px);
    max-height: 0;
    margin-top: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
    border: none;
}

/* 第一个 tab 默认显示 - 放在后面确保优先级 */
.regions-container .region-bar:first-child,
.region-bar:first-child {
    opacity: 1 !important;
    transform: translateY(0) !important;
    max-height: none !important;
    height: auto !important;
    margin-top: 0 !important;
    padding-top: 25px !important;
    padding-bottom: 25px !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    overflow: visible !important;
    visibility: visible !important;
}

/* 展开动画 */
.region-bar.animate-in {
    opacity: 1 !important;
    transform: translateY(0) !important;
    max-height: 200px !important;
    margin-top: 15px !important;
    padding-top: 25px !important;
    padding-bottom: 25px !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    transition: opacity 1s ease, transform 1s cubic-bezier(0.4, 0, 0.2, 1), 
                max-height 1s cubic-bezier(0.4, 0, 0.2, 1),
                margin-top 1s cubic-bezier(0.4, 0, 0.2, 1),
                padding 1s cubic-bezier(0.4, 0, 0.2, 1),
                border 1s ease;
}

.region-bar:hover {
    background: #f9f9f9;
    transform: translateX(5px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.region-bar.active {
    width: 280px !important;
    background: #fff;
    border-left: 4px solid var(--shanghai-red);
    transform: translateX(0);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.region-bar:not(.active) {
    width: 100%;
}

.region-name {
    font-family: var(--font-serif-en);
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--ink-black);
    display: block;
    transition: all 0.6s ease;
    white-space: nowrap;
}

.region-bar.active .region-name {
    font-size: 1.1rem;
}

/* Narrative Card (The Paper Note) */
.narrative-card {
    background: #fff;
    padding: 40px;
    position: relative;
    border-top: 4px solid var(--ink-black);
    min-height: 300px;
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 1s ease, transform 1s cubic-bezier(0.4, 0, 0.2, 1), 
                padding 1s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 0;
    align-self: start;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
}

.narrative-card.animate-in {
    opacity: 1 !important;
    transform: translateY(0) !important;
    max-height: 2000px !important;
    padding-top: 40px !important;
    padding-bottom: 40px !important;
    overflow: visible !important;
}

/* =========================================
   6. Black Section (新页面区域)
   ========================================= */
.black-section {
    width: 100%;
    min-height: 100vh;
    background-color: #1a1a1a; /* 带灰度的黑色 */
    position: relative;
    opacity: 0;
    transform: translateY(150px);
    transition: opacity 1.5s ease-out, transform 1.5s cubic-bezier(0.2, 0, 0.1, 1); /* 先慢后快 */
    margin-top: 120px; /* 增加间距，让两者分开 */
    z-index: 1;
}

.black-section.animate-in {
    opacity: 1 !important;
    transform: translateY(0) !important;
}

.black-section.animate-out {
    opacity: 0 !important;
    transform: translateY(150px) !important;
    transition: opacity 1.5s ease-out, transform 1.5s cubic-bezier(0.2, 0, 0.1, 1); /* 退出时也是先慢后快 */
}

.black-section-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 80px 40px;
    color: #fff;
    position: relative;
    min-height: 100vh;
    padding-bottom: 120px; /* 为地板留出空间 */
    z-index: 1; /* 确保内容在网格背景之上 */
}


/* =========================================
   8. Footer Info (个人信息和参考文献)
   ========================================= */
.footer-info {
    max-width: 1200px;
    margin: 0 auto;
    padding: 30px 40px 60px 40px; /* 减少顶部padding，让署名更靠近地板 */
    color: #ccc;
    font-size: 0.9rem;
    line-height: 1.8;
    opacity: 0;
    transform: translateX(-100px);
    transition: opacity 1s ease-out, transform 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.footer-info.animate-in {
    opacity: 1;
    transform: translateX(0);
}

.author-info {
    margin-bottom: 50px;
    padding-bottom: 30px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.author-name {
    font-size: 1.1rem;
    font-weight: 500;
    color: #fff;
    margin-bottom: 8px;
    font-family: var(--font-serif-en);
}

.author-email {
    font-size: 0.95rem;
    color: #aaa;
    font-family: var(--font-sans);
}

.references-section {
    margin-top: 40px;
}

.references-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #fff;
    margin-bottom: 25px;
    font-family: var(--font-serif-en);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.references-list {
    list-style: decimal;
    padding-left: 25px;
    margin: 0;
    color: #ccc;
    font-family: var(--font-serif-en);
}

.references-list li {
    margin-bottom: 20px;
    padding-left: 10px;
    line-height: 1.7;
    font-size: 0.9rem;
}

.references-list li em {
    font-style: italic;
    color: #ddd;
}

.references-list li a {
    color: #999;
    text-decoration: none;
    border-bottom: 1px solid rgba(153, 153, 153, 0.3);
    transition: color 0.3s ease, border-color 0.3s ease;
}

.references-list li a:hover {
    color: #fff;
    border-bottom-color: rgba(255, 255, 255, 0.6);
}

/* 响应式设计 */
@media (max-width: 768px) {
    .footer-info {
        padding: 30px 20px 60px 20px; /* 减少顶部padding，与桌面版保持一致 */
        font-size: 0.85rem;
    }
    
    .references-list {
        padding-left: 20px;
    }
    
    .references-list li {
        margin-bottom: 15px;
        font-size: 0.85rem;
    }
}

/* Falling Text Styles */
.falling-text-container {
    position: relative;
    z-index: 1;
    width: 100%;
    height: 100vh;
    cursor: pointer;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    touch-action: pan-y; /* 允许垂直滚动 */
    overflow: visible; /* 确保不阻止滚动 */
}

.falling-text-container .falling-text-target {
    pointer-events: auto; /* 文字区域可以交互 */
}

.falling-text-target {
    display: inline-block;
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
    color: #fff;
}

.falling-text-target .word {
    display: inline-block;
    margin: 0 5px;
    user-select: none;
    white-space: nowrap;
    position: relative;
}

.falling-text-target .word .char {
    display: inline-block;
    transition: opacity 0.15s ease-in;
}

.falling-text-target .word.highlighted {
    color: #b04040; /* 稍微亮一点的红色 */
    font-weight: bold;
    text-shadow: 0 0 10px rgba(176, 64, 64, 0.5);
}

/* Mobile Optimization */
@media (max-width: 768px) {
    .falling-text-target {
        max-width: 90%;
        padding-top: 100px !important;
        font-size: 1.25rem !important;
    }
}

/* The "Stamp" effect */
.card-stamp {
    position: absolute;
    top: 20px;
    right: 20px;
    border: 2px solid var(--vintage-gold);
    color: var(--vintage-gold);
    font-size: 0.7rem;
    padding: 2px 8px;
    font-family: var(--font-sans);
    letter-spacing: 2px;
    transform: rotate(-10deg);
    opacity: 0.6;
}

.narrative-content h2 {
    font-family: var(--font-serif-en);
    font-size: 2rem;
    margin-bottom: 20px;
    color: var(--ink-black);
}

.narrative-content p {
    margin-bottom: 15px;
    font-size: 1.1rem;
}

.narrative-text-cn, 
.narrative-content .citation, 
.narrative-content .quote {
    font-family: var(--font-serif-cn);
}

.quote {
    border-left: 4px solid var(--shanghai-red);
    padding-left: 25px;
    margin: 30px 0;
    font-style: italic;
    color: var(--ink-black);
    font-size: 1.4rem;
    background: rgba(142, 32, 32, 0.08); /* Light red BG */
    padding: 20px 25px;
    font-weight: 500;
    font-family: var(--font-serif-en);
    line-height: 1.6;
    box-shadow: 0 2px 8px rgba(142, 32, 32, 0.1);
}

.citation {
    font-size: 0.85rem;
    color: #888;
    margin-top: 10px;
    display: block;
    text-align: right;
}

/* =========================================
   6. Landmarks Section (地标对比区域)
   ========================================= */
.landmarks-section {
    margin-top: 60px;
    padding: 40px 20px 60px 20px;
    position: relative;
    background: linear-gradient(to bottom, transparent, rgba(244, 241, 234, 0.5), transparent);
    }

.landmarks-header {
    margin-bottom: 50px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--ink-black);
    display: flex;
    align-items: flex-start;
    gap: 20px;
}

.landmarks-title-line {
    width: 4px;
    height: 60px;
    background-color: var(--shanghai-red);
    flex-shrink: 0;
    margin-top: 5px;
}

.landmarks-title-content {
    flex: 1;
}

.landmarks-title {
    font-family: var(--font-display), serif;
    font-size: 3.5rem;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--ink-black);
    margin-bottom: 15px;
    line-height: 1.1;
}

.landmarks-subtitle {
    font-family: var(--font-display), serif;
    font-size: 1.1rem;
    color: #666;
    font-style: normal;
    margin-bottom: 15px;
}

.landmarks-context-note {
    font-family: var(--font-serif-en);
    font-size: 0.95rem;
    color: #777;
    font-style: italic;
    line-height: 1.6;
    margin-top: 15px;
    padding: 15px 20px;
    background: rgba(197, 160, 89, 0.08);
    border-left: 3px solid var(--vintage-gold);
    max-width: 800px;
}

.landmark-card {
    margin-bottom: 100px;
    position: relative;
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 1s ease, transform 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.landmark-card.animate-in {
    opacity: 1;
    transform: translateY(0);
}

.landmark-number {
    position: absolute;
    right: 0;
    top: -40px;
    font-size: 12rem;
    font-weight: 900;
    color: rgba(0, 0, 0, 0.05);
    font-family: var(--font-display), serif;
    line-height: 1;
    z-index: 0;
    transition: transform 0.1s linear;
}

.landmark-content {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 40px;
    align-items: center;
    position: relative;
    z-index: 1;
}

.landmark-image-container {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 3;
    overflow: hidden;
    border: 6px solid #fff;
    outline: 1px solid var(--frame-border);
    cursor: none;
    background: #000;
    transform: scale(0.85);
    transform-origin: center;
}

.landmark-image {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    transition: clip-path 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

.landmark-image.modern {
    clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
    filter: grayscale(0);
}

.landmark-image.old {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    filter: grayscale(1) sepia(0.4) contrast(1.1);
    opacity: 0.95;
}

.landmark-image.old::after {
    content: '';
    position: absolute;
    inset: 0;
    background: 
        url('https://www.transparenttextures.com/patterns/black-felt.png'),
        rgba(0, 0, 0, 0.1);
    opacity: 0.3;
    mix-blend-mode: overlay;
}

.landmark-image-container:hover .landmark-image.modern {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
}

.landmark-image-container:hover .landmark-image.old {
    clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
}

.landmark-overlay {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 10;
    mix-blend-mode: difference;
}

.landmark-status {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #fff;
    font-family: var(--font-sans);
    font-size: 0.75rem;
    letter-spacing: 2px;
    text-transform: uppercase;
}

.landmark-image-container:hover .status-text {
    animation: scanning 0.3s ease;
}

@keyframes scanning {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.landmark-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 3px;
    background: var(--shanghai-red);
    transform-origin: left;
    transition: width 0.5s ease;
}

.landmark-image-container:hover .landmark-progress {
    width: 100%;
}

.landmark-text {
    padding-left: 0;
}

.landmark-year {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    font-family: var(--font-display), serif;
    font-size: 3rem;
    font-weight: 900;
    line-height: 1;
    color: var(--ink-black);
}

.year-old {
    opacity: 1;
    transition: opacity 0.3s ease;
}

.landmark-image-container:hover ~ .landmark-text .year-old {
    opacity: 0.6;
}

.year-separator {
    font-size: 1.5rem;
    color: var(--shanghai-red);
}

.year-new {
    opacity: 0.6;
    transition: opacity 0.3s ease;
}

.landmark-image-container:hover ~ .landmark-text .year-new {
    opacity: 1;
}

.landmark-name {
    font-family: var(--font-display), serif;
    font-size: 2rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 8px;
    line-height: 1.2;
    color: var(--ink-black);
}

.landmark-detail {
    font-family: var(--font-serif-cn);
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 20px;
    font-weight: 300;
    letter-spacing: 2px;
}

.landmark-desc {
    font-family: 'Times New Roman', Times, serif;
    font-size: 1rem;
    color: var(--ink-black);
    line-height: 1.6;
    font-style: normal;
}

/* Landmark Tab Section */
.landmark-tab-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.landmark-tab {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 20px 40px;
    background: #fff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: all 0.3s ease;
    max-width: 300px;
    margin: 0 auto;
}

.landmark-tab:hover {
    background: #f9f9f9;
    border-color: var(--shanghai-red);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.landmark-tab-text {
    font-family: var(--font-display), serif;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--ink-black);
}

.landmark-tab-icon {
    font-size: 0.8rem;
    color: var(--shanghai-red);
    transition: transform 0.3s ease;
}

.landmark-tab.active .landmark-tab-icon {
    transform: rotate(180deg);
}

.landmark-tab-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), padding 0.5s ease;
    padding: 0 20px;
}

.landmark-tab-content.active {
    max-height: 500px;
    padding: 30px 20px;
}

.landmark-tab-content-inner {
    max-width: 800px;
    margin: 0 auto;
    font-family: var(--font-serif-en), serif;
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--ink-black);
    text-align: center;
}

/* 响应式设计 - 地标区域 */
@media (max-width: 968px) {
    .landmark-content {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    
    .landmark-image-container {
        aspect-ratio: 4 / 3;
    }
    
    .landmark-text {
        padding-left: 0;
    }
    
    .landmark-year {
        font-size: 3rem;
    }
    
    .landmark-name {
        font-size: 2rem;
    }
    
    .landmark-number {
        font-size: 8rem;
        top: -20px;
    }
}

/* =========================================
   7. Mobile Responsiveness
   ========================================= */
@media (max-width: 768px) {
    .title { font-size: 3rem; }
    .title-vertical-line {
        height: 60px;
    }
    
    .control-panel {
        grid-template-columns: 1fr; /* Stack vertically */
    }
    
    .region-bar {
        width: 100% !important;
        padding: 20px 25px;
    }
    
    .region-bar.active {
        width: 100% !important;
        border-left: none;
        border-top: 4px solid var(--shanghai-red);
    }
    
    .region-name {
        font-size: 1.1rem;
    }
    
    .region-bar.active .region-name {
        font-size: 1rem;
    }
}

/* =========================================
   9. Custom Cursor (自定义光标)
   ========================================= */
.custom-cursor {
    position: fixed;
    top: 0;
    left: 0;
    width: 8px;
    height: 8px;
    background-color: #fff;
    border-radius: 50%;
    pointer-events: none;
    z-index: 10000;
    mix-blend-mode: difference;
    transform: translate3d(0, 0, 0);
    transition: transform 0.1s ease-out;
}

.custom-cursor-ring {
    position: fixed;
    top: 0;
    left: 0;
    width: 40px;
    height: 40px;
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: difference;
    transition: all 0.3s ease-out;
    display: flex;
    align-items: center;
    justify-content: center;
}

.custom-cursor-ring::before,
.custom-cursor-ring::after {
    content: '';
    position: absolute;
    width: 1px;
    height: 120%;
    background-color: rgba(255, 255, 255, 0.2);
    }
    
.custom-cursor-ring::before {
    transform: rotate(45deg);
}

.custom-cursor-ring::after {
    transform: rotate(-45deg);
}

.custom-cursor-ring.click {
    width: 60px;
    height: 60px;
    border-width: 4px;
}

/* =========================================
   10. Glitch Text Effect (故障文字效果)
   ========================================= */
.glitch-text {
    position: relative;
    display: inline-block;
}

.glitch-text::before,
.glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    clip-path: inset(0 0 0 0);
}

.glitch-text::before {
    left: 2px;
    text-shadow: -1px 0 #0ff;
    clip-path: inset(44px 0 56px 0);
    animation: glitch-anim 5s infinite linear alternate-reverse;
}

.glitch-text::after {
    left: -2px;
    text-shadow: 1px 0 #f0f;
    clip-path: inset(44px 0 56px 0);
    animation: glitch-anim2 5s infinite linear alternate-reverse;
}

@keyframes glitch-anim {
    0% { clip-path: inset(31px 0 94px 0); }
    20% { clip-path: inset(6px 0 14px 0); }
    40% { clip-path: inset(82px 0 16px 0); }
    60% { clip-path: inset(13px 0 86px 0); }
    80% { clip-path: inset(55px 0 2px 0); }
    100% { clip-path: inset(41px 0 66px 0); }
}

@keyframes glitch-anim2 {
    0% { clip-path: inset(11px 0 64px 0); }
    20% { clip-path: inset(86px 0 4px 0); }
    40% { clip-path: inset(12px 0 56px 0); }
    60% { clip-path: inset(43px 0 26px 0); }
    80% { clip-path: inset(25px 0 92px 0); }
    100% { clip-path: inset(61px 0 16px 0); }
}

/* 标题故障效果（可选，更微妙） */
.title.glitch-enabled {
    position: relative;
}

.title.glitch-enabled::before,
.title.glitch-enabled::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.title.glitch-enabled:hover::before {
    opacity: 0.3;
    left: 1px;
    color: #0ff;
    animation: glitch-flicker 0.3s ease;
}

.title.glitch-enabled:hover::after {
    opacity: 0.3;
    left: -1px;
    color: #f0f;
    animation: glitch-flicker 0.3s ease 0.1s;
    }

@keyframes glitch-flicker {
    0%, 100% { opacity: 0; }
    50% { opacity: 0.3; }
}

/* =========================================
   11. Cyber Grid Animation (赛博网格动画)
   ========================================= */
.cyber-grid {
    position: absolute;
    inset: 0;
    opacity: 0.2;
    pointer-events: none;
    background-image: 
        linear-gradient(#0ff 1px, transparent 1px),
        linear-gradient(90deg, #0ff 1px, transparent 1px);
    background-size: 80px 80px;
    transform: perspective(1000px) rotateX(60deg) translateY(-100px) scale(2);
    filter: drop-shadow(0 0 5px #0ff);
    animation: grid-drift 20s linear infinite;
}

@keyframes grid-drift {
    0% { transform: perspective(1000px) rotateX(60deg) translateY(-100px) translateZ(0) scale(2); }
    100% { transform: perspective(1000px) rotateX(60deg) translateY(-100px) translateZ(100px) scale(2); }
}

/* 黑色区域的网格背景 */
.black-section::before {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0.15;
    pointer-events: none;
    background-image: 
        linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
    z-index: 0;
}

/* =========================================
   12. Scrollbar Styling (滚动条美化)
   ========================================= */
::-webkit-scrollbar {
    width: 6px;
    background: #000;
}

::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: #8E2020; /* 使用项目主题色 */
}

/* 在浅色背景区域使用不同的滚动条颜色 */
.main-wrapper::-webkit-scrollbar {
    background: var(--bg-paper);
}

.main-wrapper::-webkit-scrollbar-thumb {
    background: rgba(142, 32, 32, 0.3);
}

.main-wrapper::-webkit-scrollbar-thumb:hover {
    background: var(--shanghai-red);
}

/* =========================================
   13. Cyber Data Stream Effect (数据流效果)
   ========================================= */
.data-stream {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 200px;
    background: linear-gradient(to top, rgba(0, 255, 255, 0.1), transparent);
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
}

.data-stream::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, #0ff, transparent);
    animation: data-flow 3s linear infinite;
}

@keyframes data-flow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* =========================================
   14. Vertical Writing Mode (垂直排版)
   ========================================= */
.writing-vertical {
    writing-mode: vertical-rl;
    text-orientation: mixed;
}

/* =========================================
   15. Selection Styling (选中文本样式)
   ========================================= */
::selection {
    background-color: #8E2020;
    color: #fff;
}

::-moz-selection {
    background-color: #8E2020;
    color: #fff;
}

/* =========================================
   17. Tooltip Styling (Why 1940?)
   ========================================= */
.year-old {
    position: relative;
    cursor: help;
}

.year-old[data-tooltip]:hover::after,
.year-old[data-tooltip].tooltip-active::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.95);
    color: #fff;
    padding: 12px 16px;
    border-radius: 4px;
    font-size: 0.85rem;
    font-family: var(--font-serif-en);
    line-height: 1.5;
    white-space: normal;
    width: 280px;
    z-index: 1000;
    margin-bottom: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    pointer-events: none;
    opacity: 0;
    animation: tooltipFadeIn 0.3s ease forwards;
}

.year-old[data-tooltip]:hover::before,
.year-old[data-tooltip].tooltip-active::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.95);
    z-index: 1001;
    margin-bottom: 2px;
    opacity: 0;
    animation: tooltipFadeIn 0.3s ease forwards;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* =========================================
   18. Navigation Modal/Overlay
   ========================================= */
.navigation-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease, visibility 0.4s ease;
    backdrop-filter: blur(5px);
}

.navigation-modal.active {
    opacity: 1;
    visibility: visible;
}

.navigation-modal-content {
    background: var(--bg-paper);
    padding: 50px 60px;
    max-width: 600px;
    width: 90%;
    border: 3px solid var(--shanghai-red);
    position: relative;
    transform: scale(0.9);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

.navigation-modal.active .navigation-modal-content {
    transform: scale(1);
}

.navigation-modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: transparent;
    border: 2px solid var(--shanghai-red);
    color: var(--shanghai-red);
    width: 40px;
    height: 40px;
    cursor: pointer;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    font-family: var(--font-sans);
}

.navigation-modal-close:hover {
    background: var(--shanghai-red);
    color: #fff;
    transform: rotate(90deg);
}

.navigation-modal h2 {
    font-family: var(--font-display), serif;
    font-size: 2.5rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 30px;
    color: var(--ink-black);
    border-bottom: 3px solid var(--shanghai-red);
    padding-bottom: 15px;
}

.navigation-modal-instructions {
    list-style: none;
    padding: 0;
    margin: 0;
}

.navigation-modal-instructions li {
    margin-bottom: 20px;
    padding-left: 40px;
    position: relative;
    font-family: var(--font-serif-en);
    font-size: 1.1rem;
    line-height: 1.6;
    color: var(--ink-black);
}

.navigation-modal-instructions li::before {
    content: '→';
    position: absolute;
    left: 0;
    color: var(--shanghai-red);
    font-size: 1.5rem;
    font-weight: bold;
}

.navigation-modal-instructions strong {
    color: var(--shanghai-red);
    font-weight: 600;
}

.navigation-modal-checkbox-wrapper {
    margin-top: 30px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: var(--font-serif-en);
    font-size: 0.95rem;
    color: #666;
}

.navigation-modal-checkbox-wrapper input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--shanghai-red);
}

@media (max-width: 768px) {
    .navigation-modal-content {
        padding: 40px 30px;
    }
    
    .navigation-modal h2 {
        font-size: 2rem;
    }
    
    .navigation-modal-instructions li {
        font-size: 1rem;
        padding-left: 35px;
    }
}

/* =========================================
   16. Landmark Reveal Component (Juxtaposition/Reveal)
   ========================================= */

/* UNVEIL Button */
.landmark-reveal-btn {
    position: absolute;
    bottom: 20px;
    right: 20px;
    padding: 12px 24px;
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid var(--vintage-gold);
    color: var(--vintage-gold);
    font-family: 'Courier Prime', 'Courier New', monospace;
    font-size: 0.75rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    z-index: 20;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.landmark-reveal-btn:hover {
    background: var(--vintage-gold);
    color: #000;
    box-shadow: 0 0 20px rgba(197, 160, 89, 0.6);
    transform: translateY(-2px);
}

.reveal-btn-text {
    display: block;
}

/* State A: Modern/Neon Style (Default) */
.landmark-card {
    --landmark-theme: #d97706;
}

/* =========================================
   19. Visual Theme Uniformity
   ========================================= */

/* Modern/Pudong Sections - Cool Greys/Blues */
.landmark-card .landmark-image.modern,
.landmark-card .landmark-image-container:hover .landmark-image.modern {
    filter: grayscale(0) brightness(1.05) contrast(1.1);
}

.landmark-card .year-new {
    color: #4a5568; /* Cool grey */
}

/* Longtang/1940 Sections - Warm Earth Tones */
.landmark-card .landmark-image.old {
    filter: grayscale(1) sepia(0.4) contrast(1.1) hue-rotate(-10deg);
}

.landmark-card .year-old {
    color: #8b4513; /* Warm brown/earth tone */
}

/* Narrative sections with warm tones for historical content */
.narrative-card {
    background: #fff;
    border-top: 4px solid var(--ink-black);
}

/* Control panel - subtle theme differentiation */
.region-bar {
    background: #fff;
    border-left: 3px solid transparent;
    transition: border-color 0.3s ease;
}

.region-bar:hover {
    border-left-color: var(--shanghai-red);
}

.region-bar.active {
    border-left-color: var(--shanghai-red);
    background: #fafafa;
}

/* Map section - modern theme */
.exhibit-container {
    background: linear-gradient(to bottom, rgba(200, 220, 240, 0.05), transparent);
}

/* Landmarks section - warm historical theme */
.landmarks-section {
    background: linear-gradient(to bottom, transparent, rgba(244, 241, 234, 0.5), transparent);
}

.landmark-card .landmark-name {
    color: var(--ink-black);
    text-shadow: none;
}

.landmark-card .landmark-desc {
    color: var(--ink-black);
}

/* State B: Archive/Cyberpunk Style */
.landmark-card.glitch-active {
    position: relative;
}

.landmark-card.glitch-active .landmark-text {
    font-family: 'Courier Prime', 'Courier New', 'Courier', monospace;
    background: rgba(0, 0, 0, 0.9);
    padding: 30px;
    border: 1px solid var(--landmark-theme, #0ff);
    box-shadow: 
        0 0 10px rgba(0, 255, 255, 0.3),
        inset 0 0 20px rgba(0, 255, 255, 0.1);
}

.landmark-card.glitch-active .landmark-name {
    color: var(--landmark-theme, #0ff);
    text-shadow: 
        0 0 10px var(--landmark-theme, #0ff),
        0 0 20px var(--landmark-theme, #0ff);
    font-family: 'Courier Prime', 'Courier New', monospace;
    letter-spacing: 3px;
    font-size: 1.8rem;
}

.landmark-card.glitch-active .landmark-desc {
    color: #0ff;
    font-family: 'Courier Prime', 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.8;
    text-align: left;
    opacity: 0;
    animation: typewriter 1.5s ease-in-out 0.5s forwards;
}

.landmark-card.glitch-active .landmark-year {
    color: var(--landmark-theme, #0ff);
    font-family: 'Courier Prime', 'Courier New', monospace;
    filter: drop-shadow(0 0 5px var(--landmark-theme, #0ff));
}

.landmark-card.glitch-active .year-separator {
    color: var(--landmark-theme, #0ff);
    filter: drop-shadow(0 0 5px var(--landmark-theme, #0ff));
}

.landmark-card.glitch-active .landmark-image-container {
    filter: grayscale(0.3) contrast(1.2) brightness(0.9);
    border-color: var(--landmark-theme, #0ff);
    box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
}

.landmark-card.glitch-active .landmark-status {
    color: var(--landmark-theme, #0ff);
    text-shadow: 0 0 10px var(--landmark-theme, #0ff);
}

/* Quote styling for State B */
.landmark-quote {
    margin: 20px 0;
    padding: 15px;
    border-left: 3px solid var(--landmark-theme, #0ff);
    color: var(--landmark-theme, #0ff);
    font-family: 'Courier Prime', 'Courier New', monospace;
    font-style: italic;
    font-size: 0.85rem;
    opacity: 0;
    animation: typewriter 1s ease-in-out 2s forwards;
    background: rgba(0, 255, 255, 0.05);
}

/* Glitch Animation */
.landmark-card.glitch-transition {
    animation: glitch 0.3s ease-in-out;
}

@keyframes glitch {
    0%, 100% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }
    10% {
        transform: translate(-2px, 2px);
        filter: hue-rotate(90deg);
    }
    20% {
        transform: translate(-1px, 0px);
        filter: hue-rotate(180deg);
    }
    30% {
        transform: translate(3px, 2px);
        filter: hue-rotate(270deg);
    }
    40% {
        transform: translate(1px, -1px);
        filter: hue-rotate(360deg);
    }
    50% {
        transform: translate(-1px, 2px);
        filter: hue-rotate(90deg);
    }
    60% {
        transform: translate(-3px, 1px);
        filter: hue-rotate(180deg);
    }
    70% {
        transform: translate(2px, 1px);
        filter: hue-rotate(270deg);
    }
    80% {
        transform: translate(-1px, -1px);
        filter: hue-rotate(360deg);
    }
    90% {
        transform: translate(1px, 2px);
        filter: hue-rotate(90deg);
    }
}

/* Typewriter Effect */
@keyframes typewriter {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Additional Cyberpunk Effects */
.landmark-card.glitch-active::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 255, 255, 0.03) 2px,
            rgba(0, 255, 255, 0.03) 4px
        );
    pointer-events: none;
    z-index: 1;
    opacity: 0.5;
}

.landmark-card.glitch-active .landmark-text::after {
    content: '_';
    color: var(--landmark-theme, #0ff);
    animation: blink 1s infinite;
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* Responsive adjustments */
@media (max-width: 968px) {
    .landmark-reveal-btn {
        padding: 10px 20px;
        font-size: 0.7rem;
        bottom: 15px;
        right: 15px;
    }
    
    .landmark-card.glitch-active .landmark-text {
        padding: 20px;
    }
    
    .landmark-card.glitch-active .landmark-name {
        font-size: 1.5rem;
    }
}